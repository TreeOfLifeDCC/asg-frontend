<div id="dynamic">
    <div class="container" style="padding-top: 65px;">
        <h1 class="text-center page-header">{{bioSampleId}}</h1>
        <dl class="row">
            <ng-container *ngIf="bioSampleObj">
                <ng-container *ngIf="bioSampleObj.commonName">
                    <dt class="col-sm-3">Name:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.commonName}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.accession">
                    <dt class="col-sm-3">BioSample ID:</dt>
                    <dd class="col-sm-9">
                        <a href="http://www.ebi.ac.uk/biosamples/samples/{{bioSampleObj.accession}}" target="_blank">
                            {{bioSampleObj.accession}}
                        </a>
                    </dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.organism">
                    <dt class="col-sm-3">Organism:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.organism}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.organismPart">
                    <dt class="col-sm-3">Organism Part:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.organismPart}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.sex">
                    <dt class="col-sm-3">Sex:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.sex}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.taxonId">
                    <dt class="col-sm-3">Tax ID:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.taxonId}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.specimenId">
                    <dt class="col-sm-3">Specimen ID:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.specimenId}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.cultureOrStrainId">
                    <dt class="col-sm-3">Culture ID:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.cultureOrStrainId}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.lifestage">
                    <dt class="col-sm-3">Lifestage:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.lifestage}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.relationship">
                    <dt class="col-sm-3">Relationship:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.relationship}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.gal">
                    <dt class="col-sm-3">Gal:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.gal}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.galSampleId">
                    <dt class="col-sm-3">Gal Sample ID:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.galSampleId}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.collectedBy">
                    <dt class="col-sm-3">Collected By:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.collectedBy}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.collectingInstitution">
                    <dt class="col-sm-3">Collecting Institution:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.collectingInstitution}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.collectionDate">
                    <dt class="col-sm-3">Collection Date:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.collectionDate}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.geographicLocationCountryAndOrSea">
                    <dt class="col-sm-3">Geographic Location (Country and/or Sea):</dt>
                    <dd class="col-sm-9">{{bioSampleObj.geographicLocationCountryAndOrSea}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.geographicLocationRegionAndLocality">
                    <dt class="col-sm-3">Geographic Location (Region and Locality):</dt>
                    <dd class="col-sm-9">{{bioSampleObj.geographicLocationRegionAndLocality}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.geographicLocationLatitude?.text">
                    <dt class="col-sm-3">Geographic Location (Latitude):</dt>
                    <dd class="col-sm-9">{{bioSampleObj.geographicLocationLatitude.text}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.geographicLocationLongitude?.text">
                    <dt class="col-sm-3">Geographic Location (Longitude):</dt>
                    <dd class="col-sm-9">{{bioSampleObj.geographicLocationLongitude.text}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.geographicLocationDepth?.text">
                    <dt class="col-sm-3">Geographic Location (Depth):</dt>
                    <dd class="col-sm-9">{{bioSampleObj.geographicLocationDepth.text}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.geographicLocationElevation?.text">
                    <dt class="col-sm-3">Geographic Location Elevation:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.geographicLocationElevation.text}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.habitat">
                    <dt class="col-sm-3">Habitat:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.habitat}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.identifiedBy">
                    <dt class="col-sm-3">Identified By:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.identifiedBy}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.identifierAffiliation">
                    <dt class="col-sm-3">Identifier Affiliation:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.identifierAffiliation}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.specimenVoucher">
                    <dt class="col-sm-3">Specimen Voucher:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.specimenVoucher}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.projectName">
                    <dt class="col-sm-3">Project Name:</dt>
                    <dd class="col-sm-9">{{bioSampleObj.projectName}}</dd>
                </ng-container>

                <ng-container *ngIf="bioSampleObj.sampleDerivedFrom">
                    <dt class="col-sm-3">Sample Derived From:</dt>
                    <dd class="col-sm-9">
                        <a href="http://www.ebi.ac.uk/biosamples/samples/{{bioSampleObj.sampleDerivedFrom}}" target="_blank">
                            {{bioSampleObj.sampleDerivedFrom}}
                        </a>
                    </dd>
                </ng-container>
            </ng-container>

            <!-- Custom Fields Section -->
            <div class="col-sm-12" *ngIf="bioSampleObj?.customFields?.length">
                <hr />
                <div class="row" *ngFor="let sample of bioSampleObj.customFields">
                    <dt class="col-sm-3">{{sample?.name}}</dt>
                    <dd class="col-sm-9">
                        <a *ngIf="sample.ontologyTerms?.length > 0; else simple" href="{{sample.ontologyTerms[0]}}">
                            {{sample?.value}}
                        </a>
                        <ng-template #simple>
                            {{sample?.value}}
                        </ng-template>
                    </dd>
                </div>
            </div>

            <div class="col-sm-12" *ngIf="bioSampleObj?.specimens?.length">
                <hr />
                <h1 class="col-sm-12 page-header">Related Specimens</h1>
                <button
                        type="button"
                        style="float: right;"
                        class="btn btn-primary"
                        mat-raised-button
                        (click)="exportTableToCSV('related-specimens-metadata.csv')"
                >
                    Download metadata
                </button>
                <mat-form-field>
                    <mat-label>Search</mat-label>
                    <input
                            matInput
                            [(ngModel)]="searchText"
                            (keyup)="applyFilter($event)"
                            placeholder="Ex. ILLUMINA"
                            #input
                    />
                </mat-form-field>
                <div class="row">
                    <div class="col-sm-10">
                        <div class="row">
                            <table *ngIf="dataSourceRecords && specDisplayedColumns.length > 0"
                                   mat-table [dataSource]="dataSourceRecords" matSort style="width: 100%;">
                                <ng-container matColumnDef="accession">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> BioSample ID </mat-header-cell>
                                    <mat-cell *matCellDef="let element" class="txt-center">
                                        <a [routerLink]="['/data/specimens/details/', element.accession]">{{ element.accession }}</a>
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="organism">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> Organism </mat-header-cell>
                                    <mat-cell *matCellDef="let element" class="txt-center">{{ element.organism }}</mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="commonName">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> Common Name </mat-header-cell>
                                    <mat-cell *matCellDef="let element" class="txt-center">{{ element.commonName }}</mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="sex">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> Sex </mat-header-cell>
                                    <mat-cell *matCellDef="let element" class="txt-center">{{ element.sex }}</mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="organismPart">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> Organism part </mat-header-cell>
                                    <mat-cell *matCellDef="let element" class="txt-center">{{ element.organismPart }}</mat-cell>
                                </ng-container>

                                <mat-header-row *matHeaderRowDef="specDisplayedColumns"></mat-header-row>
                                <mat-row *matRowDef="let row; columns: specDisplayedColumns"></mat-row>
                            </table>
                            <mat-paginator style="width: 100%;" [pageSizeOptions]="[20, 30, 50]" showFirstLastButtons [length]="specBioSampleTotalCount"></mat-paginator>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12" *ngIf="bioSampleObj?.annotation">
                <h1 class="col-sm-12 page-header">Annotations</h1>
                <ul class="list-group">
                    <li class="list-group-item list-group-item-success">
                        <a href="{{bioSampleObj.annotation}}">{{bioSampleObj.annotation}}</a>
                    </li>
                </ul>
            </div>
        </dl>
    </div>
</div>
