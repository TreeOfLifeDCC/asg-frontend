<div class="card bg-lite mb-3 filter-top">

    <h3 class="card-header filter-heading">
        {{title}}
        @if (title === 'Experiment Type' && filterService.experimentTypeFilters?.length > filterSize) {
            <span>
                @if (filterService.experimentTypeFilters?.length > filterSize || filterService.filterArray?.length > filterSize) {
                    @if (isCollapsed) {
                        <i class="material-icons float-right" (click)="toggleCollapse()">add</i>
                    } @else {
                        <i class="material-icons float-right" (click)="toggleCollapse()">remove</i>
                    }
                }
            </span>
        }
    </h3>

    @if (title === 'Experiment Type') {
        <ul class="list-group">
            @for (filter of filterService.experimentTypeFilters; track filter; let i = $index) {
                @if (i < itemLimit) {
                    <li class="biosample list-group-item d-flex justify-content-between align-items-center biosamples-inactive"
                        id="{{filter.key}}-Experiment Type"
                        [ngClass]="checkFilterIsActive('experimentType-'+filter.key)"
                        (click)="onFilterClick($event, 'experiment-type', filter.key)" style="cursor: pointer">
                        <span>{{filter.key}}</span>
                        @if (isShowCount === true) {
                            <span class="badge badge-pill badge-info">{{filter.doc_count}}</span>
                        }
                    </li>
                }
            }
        </ul>
    }

    @if (title === 'Symbionts') {
        <ul class="list-group">
            @for (filter of filterService.symbiontsFilters; track filter; let i = $index) {
                @if (i < itemLimit) {
                    <li class="biosample list-group-item d-flex justify-content-between align-items-center biosamples-inactive"
                        id="{{filter.key}}-Symbionts Status"
                        [ngClass]="checkFilterIsActive(filter.label+'-'+filter.key)"
                        (click)="onFilterClick($event, filter.label, filter.key)" style="cursor: pointer">
                        <span>{{filter.key}}</span>
                        @if (isShowCount === true) {
                            <span class="badge badge-pill badge-info">{{filter.doc_count}}</span>
                        }


                    </li>
                }
            }
        </ul>
    }

    @if (title === 'Metagenomes') {
        <ul class="list-group">
            @for (filter of filterService.metagenomesFilters; track filter; let i = $index) {
                @if (i < itemLimit) {
                    <li class="biosample list-group-item d-flex justify-content-between align-items-center biosamples-inactive"
                        id="{{filter.key}}-Metagenomes Status"
                        [ngClass]="checkFilterIsActive(filter.label+'-'+filter.key)"
                        (click)="onFilterClick($event, filter.label, filter.key)" style="cursor: pointer">
                        <span>{{filter.key}}</span>
                        @if (isShowCount === true) {
                            <span class="badge badge-pill badge-info">{{filter.doc_count}}</span>
                        }
                    </li>
                }
            }
        </ul>
    }

    @if (title === 'Data Status') {
        <ul class="list-group">
            @for (filter of filterService.filterArray; track filter; let i = $index) {
                @if (filter.count > 0) {
                    <li class="biosample list-group-item d-flex justify-content-between align-items-center biosamples-inactive"
                        [ngClass]="checkFilterIsActive(filter.key)"
                        (click)="onFilterClick($event, filter.label, filter.key)" style="cursor: pointer">
                        <span>{{filter.title}}</span>
                        @if (isShowCount === true) {
                            <span class="badge badge-pill badge-info">{{filter.count}}</span>
                        }
                    </li>
                }
            }
        </ul>
    }

</div>
